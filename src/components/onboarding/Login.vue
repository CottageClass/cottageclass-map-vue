<template>
<div class="onb-body-splash">
  <div class="logo"><img src="@/assets/cc-logo-horiz-blue.svg" width="170" height="28" alt="" class="blockquote-container"></div>
  <div class="hero-container"><img src="@/assets/login-photo-2.jpg" width="640" alt="" class="hero-image"></div>
  <div class="section">
    <h1 class="heading">Book childcare with trusted parents near you</h1>
    <ul class="unordered-list w-list-unstyled">
      <li class="list-item"><img src="@/assets/save-money2-32.svg" alt="" class="bullet-image">
        <div class="list-item-text">Save money on childcare.</div>
      </li>
      <li class="list-item"><img src="@/assets/house2-32.svg" alt="" class="bullet-image">
        <div class="list-item-text">Find available sitters right next door.</div>
      </li>
      <li class="list-item"><img src="@/assets/match-parents2-32.svg" alt="" class="bullet-image">
        <div class="list-item-text">Meet other families who share your parenting style.</div>
      </li>
      <li class="list-item"><img src="@/assets/fun2-32.svg" alt="" class="bullet-image">
        <div class="list-item-text">Enrich your childrenâ€™s lives with fun, easy playdates.</div>
      </li>
    </ul>
  </div>
  <div class="section">
    <h1 class="heading">Use it for</h1>
    <ul class="unordered-list w-list-unstyled">
      <li class="list-item"><img src="@/assets/check-circle-blue-outline-32.svg" alt="" class="bullet-image">
        <div class="list-item-text">Date night!</div>
      </li>
      <li class="list-item"><img src="@/assets/check-circle-blue-outline-32.svg" alt="" class="bullet-image">
        <div class="list-item-text">Afterschool pickup &amp; homework help.</div>
      </li>
      <li class="list-item"><img src="@/assets/check-circle-blue-outline-32.svg" alt="" class="bullet-image">
        <div class="list-item-text">Childcare emergencies.</div>
      </li>
      <li class="list-item"><img src="@/assets/check-circle-blue-outline-32.svg" alt="" class="bullet-image">
        <div class="list-item-text">Babysitting without the hassle.</div>
      </li>
    </ul>
  </div>
  <div class="section">
    <h1 class="heading">As covered in</h1>
    <div class="press-container"><a href="https://www.bloomberg.com/company/announcements/bloomberg-and-ny-tech-meetup-spotlight-female-led-startups-at-winter-2016-womens-demo-night/" target="_blank" class="press-card w-inline-block"><img src="@/assets/bloomberg.png" alt="" class="press-logo"></a><a href="https://www.wsj.com/articles/haute-home-schools-designed-to-give-kids-a-bespoke-education-1455807796" target="_blank" class="press-card w-inline-block"><img src="@/assets/thewallstreetjournal.png" alt="" class="press-logo"></a><a href="https://www.nytimes.com/slideshow/2016/06/26/nyregion/not-just-the-teachers-pets/s/26PETCITY-slide-IKW9.html" target="_blank" class="press-card w-inline-block"><img src="@/assets/thenewyorktimes.png" alt="" class="press-logo"></a><a href="https://mommypoppins.com/new-york-city-kids/camps/8-new-summer-camps-for-nyc-kids-in-2017" target="_blank" class="press-card w-inline-block"><img src="@/assets/mommypoppins.png" alt="" class="press-logo"></a><a href="http://www.gettingsmart.com/2017/01/cottageclass-expanding-access-to-microschools-and-learning-experiences/" target="_blank" class="press-card w-inline-block"><img src="@/assets/gettingsmart.png" alt="" class="press-logo"></a></div>
  </div>
  <div class="section">
    <div class="parents-heart-us-title">
      <h1 class="heading-r">Parents</h1><img src="@/assets/heart-red.svg" alt="" class="heart">
      <h1 class="heading-l">Us</h1>
    </div>
    <ul class="testimonial-list-group">
      <li class="testimonial-list-item"><img src="@/assets/photo-12.png" alt="" class="testimonial-desktop-image w-hidden-small w-hidden-tiny">
        <div class="blockquote-container w-clearfix"><img src="https://uploads-ssl.webflow.com/5ba3c28cff7d47030870c8e2/5ba561a9c21f1a20554cc9be_quotation-4.svg" alt="" class="quotation-mark-icon">
          <blockquote class="parents-love-us-blockquote">William has been very excited for &quot;school&quot; and often comes home singing a new song or talking about an activity he did that day. More than anything we&#x27;re hoping interacting with multiple children will get him better at being gentle, sharing and taking turns... things that he&#x27;s been trying very hard to understand :) &quot;</blockquote>
          <div class="testimonial-image-name-group"><img src="@/assets/photo-12.png" alt="" class="testimonial-mobile-image w-hidden-main w-hidden-medium">
            <div class="testimonial-mobile-text-content">
              <div class="testimonial-list-item-name"><strong class="parent-name">Mary Summers</strong></div>
              <div class="parent-location p-small-black-50">Brooklyn</div>
            </div>
          </div>
        </div>
      </li>
      <li class="list-item-divider"></li>
      <li class="testimonial-list-item"><img src="@/assets/photo-62x.png" alt="" class="testimonial-desktop-image w-hidden-small w-hidden-tiny">
        <div class="blockquote-container w-clearfix"><img src="https://uploads-ssl.webflow.com/5ba3c28cff7d47030870c8e2/5ba561a9c21f1a20554cc9be_quotation-4.svg" alt="" class="quotation-mark-icon">
          <blockquote class="parents-love-us-blockquote">CottageClass has transformed our son's learning and life! We can now customize his education to his learning style. He has found teachers that embrace him as a student and a human being. He feels valued and is thriving. Middle school has been an awakening and not a chore. Thank you!</blockquote>
          <div class="testimonial-image-name-group"><img src="@/assets/photo-62x.png" alt="" class="testimonial-mobile-image w-hidden-main w-hidden-medium">
            <div class="testimonial-mobile-text-content">
              <div class="testimonial-list-item-name">Sara Fitzpatrick</div>
              <div class="parent-location p-small-black-50">Brooklyn</div>
            </div>
          </div>
        </div>
      </li>
      <li class="list-item-divider"></li>
      <li class="testimonial-list-item"><img src="@/assets/photo-62x.png" alt="" class="testimonial-desktop-image w-hidden-small w-hidden-tiny">
        <div class="blockquote-container w-clearfix"><img src="https://uploads-ssl.webflow.com/5ba3c28cff7d47030870c8e2/5ba561a9c21f1a20554cc9be_quotation-4.svg" alt="" class="quotation-mark-icon">
          <blockquote class="parents-love-us-blockquote">EMMETT LOVES LOVES LOVES this program. He is beaming when he walks out...thank you so much. Please let me know if there is anything I can do.&quot;</blockquote>
          <div class="testimonial-image-name-group"><img src="@/assets/eva-vandock-pinkley.jpg" alt="" class="testimonial-mobile-image w-hidden-main w-hidden-medium">
            <div class="testimonial-mobile-text-content">
              <div class="testimonial-list-item-name">Eva van Dok Pinkley</div>
              <div class="parent-location p-small-black-50">Brooklyn</div>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div class="fb-container"><a @click="authenticate('facebook')" class="fb-button w-inline-block"><img src="@/assets/facebook-button-icon.svg" width="24" height="24" alt="" /><div class="fb-button-text">Continue with Facebook</div></a></div>
</div>
</template>

<script>

import networks from '@/assets/network-info.json'
import * as Token from '@/utils/tokens.js'
import * as api from '@/utils/api.js'

export default {
    name: 'Login',
    data () {
      return {
        networks: networks,
        currentUser: {}
      }
    },
    mounted: function () {
      api.fetchCurrentUser(Token.currentUserId(this.$auth)).then(currentUser => {
    if (currentUser.hasAllRequiredFields) {
      this.$emit('userAlreadyOnboarded')
    } else if (currentUser.id) {
      this.$emit('userNotYetOnboarded')
    } else {
      return false
    }});
    },
    methods: {
      authenticate: function(provider) {
	/*
	 *  Logs in the user (Facebook)
	 * - follows OAuth flow using VueAuth to get OAuth code
	 * - sends code to backend to exchange for access_token
	 * - backend fetches access_token, stores it in DB, and sends back JWT for user
	 * - VueAuthenticate stores JWT for future API access authorization
	 */

	/* TODO: Refactor front and backend to authenticate via the following:
	 * - use FB library to obtain access token and store in cookies
	 * - send FB access_token to backend
	 * - backend decodes token using Koala, finds user by fbId or email, and sends back JWT for future API access
	 * - VueAuthenticate or other JWT auth library stores JWT token in localStorage or otherwise for us
	 */

	// store value of this to access this.$emit during callback
	let component = this
	this.$auth.authenticate(provider)
	  .then(res => {
	    console.log("auth SUCCESS")
  }).then(res => api.fetchCurrentUser(Token.currentUserId(component.$auth))).then(currentUser => {
    if (currentUser.hasAllRequiredFields) {
      this.$emit('userAlreadyOnboarded')
    } else if (currentUser.id) {
      this.$emit('userNotYetOnboarded')
    } else {
      return false
    }
  }).catch(function(err) {
	    console.log("auth FAILURE or user not onboarded yet")
	    console.log(err) 
	  })
}
}
};

</script>

<style scoped>

.onb-login-top-image-container {
  text-align: center;
}

.onb-body-splash {
  overflow: visible;
  background-color: #fff;
  padding-top: 12px;
}

.body {
  height: 100vh;
}

.image-8 {
  margin-bottom: 0;
} 

.onb-paragraph-subheading-2-black-50 {
  margin-bottom: 8px;
  color: rgba(0, 0, 0, .5);
  font-size: 13px;
  line-height: 21px;
  text-align: center;
}
body {
  font-family: soleil, sans-serif;
  color: #333;
  font-size: 14px;
  line-height: 20px;
}

img {
  display: inline-block;
}

.logo {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  margin-top: 16px;
  margin-bottom: 19px;
  padding-right: 32px;
  padding-left: 32px;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
}

.hero-container {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
  -webkit-box-align: start;
  -webkit-align-items: flex-start;
  -ms-flex-align: start;
  align-items: flex-start;
}

.section {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  margin-bottom: 0px;
  padding: 40px 32px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-pack: start;
  -webkit-justify-content: flex-start;
  -ms-flex-pack: start;
  justify-content: flex-start;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  border-style: none none solid;
  border-bottom-width: 1px;
  border-bottom-color: rgba(0, 0, 0, .05);
}

.heading {
  margin-top: 0px;
  margin-bottom: 24px;
  color: #333;
  font-size: 22px;
  line-height: 27px;
  text-align: center;
  letter-spacing: -0.3px;
}

.fb-container {
  position: fixed;
  left: 0px;
  right: 0px;
  bottom: 0px;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  width: 100%;
  padding: 10px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  background-color: #fff;
  box-shadow: 0 -1px 8px 0 rgba(0, 0, 0, .05);
}

.fb-button {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  padding: 12px 24px 12px 16px;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  border-radius: 4px;
  background-color: #3b5998;
  color: #fff;
  text-decoration: none;
}

.fb-button:active {
  background-image: -webkit-linear-gradient(270deg, rgba(0, 0, 0, .15), rgba(0, 0, 0, .15));
  background-image: linear-gradient(180deg, rgba(0, 0, 0, .15), rgba(0, 0, 0, .15));
}

.fb-button-text {
  margin-left: 12px;
  font-size: 14px;
  text-align: left;
  letter-spacing: 0.4px;
  text-decoration: none;
}

.unordered-list {
  width: 100%;
  margin-bottom: 0px;
}

.bullet-image {
  width: 32px;
  height: 32px;
  margin-right: 12px;
}

.list-item {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  margin-bottom: 18px;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
}

.list-item-text {
  margin-top: -2px;
}

.body {
  overflow: visible;
  padding-bottom: 58px;
}

.press-container {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  width: 90%;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
}

.press-card {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  width: 33.3%;
  padding: 16px;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
}

.press-logo {
  max-width: 90%;
}

.parents-heart-us-title {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  margin-bottom: 24px;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
}

.heart {
  min-width: 32px;
  margin-right: 8px;
  margin-left: 8px;
}

.testimonial-image-name-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: start;
  -webkit-align-items: flex-start;
  -ms-flex-align: start;
  align-items: flex-start;
}

.quotation-mark-icon {
  min-width: 52px;
  margin-right: 16px;
  padding-left: 0px;
  float: left;
  clear: left;
  opacity: 1;
}

.parents-love-us-blockquote {
  width: 100%;
  margin-bottom: 24px;
  padding: 0px;
  border-style: none;
  font-size: 1.1rem;
  line-height: 1.8rem;
  text-align: left;
}

.testimonial-desktop-image {
  max-width: 250px;
  min-width: 250px;
  border-radius: 4px;
}

.testimonial-list-item-name {
  margin-bottom: 4px;
  font-weight: 700;
  text-align: left;
}

.list-item-divider {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  height: 1px;
  margin-bottom: 64px;
  -webkit-box-align: start;
  -webkit-align-items: flex-start;
  -ms-flex-align: start;
  align-items: flex-start;
  background-color: rgba(0, 0, 0, .07);
}

.testimonial-mobile-image {
  max-width: 75px;
  min-width: 75px;
  margin-right: 16px;
}

.blockquote-container {
  margin-left: 40px;
}

.parent-location {
  text-align: left;
}

.parent-location.p-small-black-50 {
  margin-bottom: 4px;
  font-size: 13px;
}

.testimonial-list-group {
  width: 80%;
  margin-bottom: 40px;
  padding-left: 0px;
  list-style-type: none;
}

.testimonial-list-item {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  margin-bottom: 64px;
  -webkit-box-align: start;
  -webkit-align-items: flex-start;
  -ms-flex-align: start;
  align-items: flex-start;
}

.parent-role {
  text-align: left;
}

.parent-role.p-small-black-50 {
  color: rgba(0, 0, 0, .5);
  font-size: 12px;
}

.heading-r {
  margin-top: 0px;
  margin-bottom: 0px;
  color: #333;
  font-size: 22px;
  line-height: 26px;
  text-align: right;
  letter-spacing: -0.3px;
}

.heading-l {
  margin-top: 0px;
  margin-bottom: 0px;
  color: #333;
  font-size: 22px;
  line-height: 26px;
  text-align: left;
  letter-spacing: -0.3px;
}

@media (max-width: 991px) {
  .press-container {
    width: 100%;
  }
  .press-card {
    width: 33.3%;
    padding: 8px;
  }
  .heart {
    min-width: 50px;
  }
  .testimonial-image-name-group {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
  }
  .quotation-mark-icon {
    min-width: 45px;
    margin-right: 16px;
  }
  .parents-love-us-blockquote {
    font-size: 1rem;
    line-height: 1.5rem;
  }
  .testimonial-mobile-text-content {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
  }
  .testimonial-mobile-image {
    max-width: 75px;
    min-width: 75px;
    margin-right: 16px;
  }
}

@media (max-width: 767px) {
  .press-card {
    width: 33.3333%;
    padding: 16px;
  }
  .press-logo {
    max-width: 80%;
  }
  .heart {
    min-width: 40px;
  }
  .testimonial-image-name-group {
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
  }
  .quotation-mark-icon {
    min-width: 41px;
    margin-right: 8px;
  }
  .parents-love-us-blockquote {
    font-size: 0.89rem;
    line-height: 1.4rem;
  }
  .testimonial-list-item-name {
    margin-bottom: 0px;
  }
  .testimonial-mobile-image {
    max-width: 60px;
    min-width: 60px;
  }
  .blockquote-container {
    margin-left: 0px;
  }
  .parent-location.p-small-black-50 {
    margin-bottom: 0px;
  }
  .testimonial-list-group {
    width: 80%;
  }
  .parent-role.p-small-black-50 {
    margin-bottom: 0px;
  }
}

@media (max-width: 479px) {
  .fb-button {
    width: 100%;
    padding-bottom: 17px;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
  }
  .fb-button:active {
    background-color: #3b5998;
  }
  .fb-button-text {
    font-weight: 400;
  }
  .press-card {
    width: 50%;
    padding: 0px;
  }
  .press-logo {
    max-width: 90%;
  }
  .testimonial-image-name-group {
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
  }
  .list-item-divider {
    margin-bottom: 32px;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
  }
  .testimonial-list-group {
    width: 100%;
  }
  .testimonial-list-item {
    margin-bottom: 32px;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
  }
}

</style>
